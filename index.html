<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A/B Testing: A Data-Driven Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 640px) {
            .chart-container {
                height: 350px;
            }
        }
        @media (min-width: 1024px) {
            .chart-container {
                height: 400px;
            }
        }
        .gradient-text {
            background: linear-gradient(to right, #0a9396, #ee9b00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .flow-line::after {
            content: '‚Üí';
            font-size: 2rem;
            color: #94d2bd;
            position: absolute;
            right: -2.5rem;
            top: 50%;
            transform: translateY(-50%);
        }
        .venn-circle {
            border-radius: 50%;
            border: 3px solid;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: 600;
            padding: 1rem;
            box-sizing: border-box;
        }
        .color-brick {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 6px;
            vertical-align: middle;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-2xl md:text-3xl font-extrabold text-slate-800">A/B Testing: The <span class="gradient-text">Data-Driven Path</span> to Product Optimization</h1>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 md:p-8">

        <!-- Section 1: Introduction & Benefits -->
        <section id="intro" class="mb-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-[#005f73] mb-4">What is A/B Testing?</h2>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">
                    A/B testing is a rigorous, randomized experimentation process designed to compare two or more versions of a digital asset. By measuring user interactions, it allows for data-backed decisions, effectively eliminating guesswork from optimization efforts and establishing a causal link between a change and its outcome.
                </p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-[#0a9396] text-center">
                    <div class="text-4xl mb-3">üìä</div>
                    <h3 class="text-xl font-bold text-[#005f73] mb-2">Data-Driven Decisions</h3>
                    <p class="text-slate-500">Empowers teams to make choices based on empirical evidence, not intuition, reducing costly mistakes.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-[#94d2bd] text-center">
                    <div class="text-4xl mb-3">üìà</div>
                    <h3 class="text-xl font-bold text-[#005f73] mb-2">Enhanced ROI</h3>
                    <p class="text-slate-500">Optimizes conversion rates from existing traffic, directly improving return on investment.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-[#ee9b00] text-center">
                    <div class="text-4xl mb-3">üòä</div>
                    <h3 class="text-xl font-bold text-[#005f73] mb-2">Improved User Experience</h3>
                    <p class="text-slate-500">Identifies designs and features that truly resonate, increasing engagement and satisfaction.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-[#ca6702] text-center">
                    <div class="text-4xl mb-3">üõ°Ô∏è</div>
                    <h3 class="text-xl font-bold text-[#005f73] mb-2">Risk Mitigation</h3>
                    <p class="text-slate-500">Allows for piloting changes with a small audience before a full-scale, confident rollout.</p>
                </div>
            </div>
        </section>

        <!-- Section 2: The A/B Testing Framework -->
        <section id="framework" class="mb-16">
            <h2 class="text-3xl md:text-4xl font-bold text-[#005f73] text-center mb-12">The A/B Testing Framework: A 5-Step Process</h2>
            <div class="relative flex flex-col lg:flex-row justify-between items-center space-y-8 lg:space-y-0 lg:space-x-4">
                <div class="relative w-full lg:w-1/5 bg-white p-6 rounded-xl shadow-lg text-center flow-line">
                    <div class="text-3xl font-extrabold text-[#0a9396]">1</div>
                    <h3 class="text-lg font-bold mt-2">Define & Hypothesize</h3>
                    <p class="text-sm text-slate-500 mt-1">Set clear, measurable goals and form a justified, predictive statement of the expected outcome.</p>
                </div>
                <div class="relative w-full lg:w-1/5 bg-white p-6 rounded-xl shadow-lg text-center flow-line">
                    <div class="text-3xl font-extrabold text-[#94d2bd]">2</div>
                    <h3 class="text-lg font-bold mt-2">Design & Segment</h3>
                    <p class="text-sm text-slate-500 mt-1">Create distinct variations and define user segments for randomized assignment.</p>
                </div>
                <div class="relative w-full lg:w-1/5 bg-white p-6 rounded-xl shadow-lg text-center flow-line">
                    <div class="text-3xl font-extrabold text-[#e9d8a6]">3</div>
                    <h3 class="text-lg font-bold mt-2">Execute & Monitor</h3>
                    <p class="text-sm text-slate-500 mt-1">Run the test for a sufficient duration while monitoring key metrics and guardrails in real-time.</p>
                </div>
                <div class="relative w-full lg:w-1/5 bg-white p-6 rounded-xl shadow-lg text-center flow-line">
                    <div class="text-3xl font-extrabold text-[#ee9b00]">4</div>
                    <h3 class="text-lg font-bold mt-2">Analyze Results</h3>
                    <p class="text-sm text-slate-500 mt-1">Use statistical methods to determine if there is a significant winner, considering practical impact.</p>
                </div>
                <div class="relative w-full lg:w-1/5 bg-white p-6 rounded-xl shadow-lg text-center">
                    <div class="text-3xl font-extrabold text-[#ca6702]">5</div>
                    <h3 class="text-lg font-bold mt-2">Conclude & Iterate</h3>
                    <p class="text-sm text-slate-500 mt-1">Implement winning changes, learn from failures, and use insights to inform the next cycle.</p>
                </div>
            </div>
        </section>

        <!-- Section 3: For the Product Manager -->
        <section id="pm" class="mb-16">
            <h2 class="text-3xl md:text-4xl font-bold text-[#005f73] text-center mb-4">A Guide for the Product Manager</h2>
            <p class="text-center text-lg text-slate-600 max-w-3xl mx-auto mb-12">Focus on high-impact areas and be aware of common pitfalls to drive meaningful product improvements.</p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">What Elements Should You Test?</h3>
                    <p class="text-center text-slate-500 mb-4">Prioritize testing elements that directly influence user decisions and actions. The goal is to identify changes significant enough to produce a measurable effect.</p>
                    <div class="chart-container">
                        <canvas id="elementsToTestChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">The Power of Specificity in CTAs</h3>
                    <p class="text-center text-slate-500 mb-4">Action-oriented Call-to-Actions (CTAs) that manage user expectations consistently outperform vague, generic phrases by reducing friction and providing clarity.</p>
                    <div class="chart-container">
                        <canvas id="ctaEffectivenessChart"></canvas>
                    </div>
                </div>

                <!-- New: Hypothesis Generator for PMs -->
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">‚ú® A/B Test Hypothesis Generator ‚ú®</h3>
                    <p class="text-center text-slate-500 max-w-2xl mx-auto mb-6">Describe your product goal (e.g., "increase user retention," "improve conversion rate on checkout page"), and get a structured A/B test hypothesis.</p>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-4">
                        <input type="text" id="hypothesisInput" placeholder="e.g., improve mobile app sign-ups" class="flex-grow p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0a9396]">
                        <button id="generateHypothesisBtn" class="bg-[#0a9396] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#005f73] transition duration-300 shadow-md">Generate Hypothesis</button>
                    </div>
                    <div id="hypothesisOutput" class="mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200 text-slate-700 min-h-[50px] flex items-center justify-center text-center">
                        <span class="text-slate-400">Your generated hypothesis will appear here...</span>
                    </div>
                     <div id="hypothesisLoader" class="hidden text-center mt-4 text-slate-500">Loading...</div>
                </div>

            </div>
        </section>
        
        <!-- Section 4: For the AI Product Manager -->
        <section id="ai-pm" class="mb-16">
            <h2 class="text-3xl md:text-4xl font-bold text-[#005f73] text-center mb-4">Navigating the AI Frontier</h2>
            <p class="text-center text-lg text-slate-600 max-w-3xl mx-auto mb-12">Testing AI/ML features introduces new layers of complexity, requiring expanded metrics and robust safety guardrails.</p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">Traditional vs. AI Testing Metrics</h3>
                     <p class="text-center text-slate-500 mb-6">AI experiments require a broader set of metrics that encompass not just user behavior but also model performance, quality, and operational cost.</p>
                    <div class="relative h-72 md:h-96 flex items-center justify-center">
                        <div class="venn-circle w-48 h-48 md:w-64 md:h-64" style="border-color: #0a9396; background-color: rgba(10, 147, 150, 0.1); position: absolute; left: 20%; z-index: 1;"></div>
                        <div class="venn-circle w-48 h-48 md:w-64 md:h-64" style="border-color: #ee9b00; background-color: rgba(238, 155, 0, 0.1); position: absolute; right: 20%; z-index: 1;"></div>
                        
                        <div class="absolute -left-4 md:left-2 top-1/4 transform -translate-y-1/2 text-sm md:text-base text-slate-700 text-left w-40 md:w-48">
                            <span class="color-brick bg-[#0a9396]"></span>
                            <span class="font-bold text-[#005f73]">Traditional Metrics:</span><br>
                            Clicks, Conversions
                        </div>
                        <div class="absolute -right-4 md:right-2 top-1/4 transform -translate-y-1/2 text-sm md:text-base text-slate-700 text-right w-40 md:w-48">
                            <span class="color-brick bg-[#ee9b00]"></span>
                            <span class="font-bold text-[#005f73]">AI/ML Metrics:</span><br>
                            Latency, Accuracy, Cost
                        </div>
                        <div class="absolute text-center font-semibold text-slate-700 z-20 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                            <span class="color-brick" style="background-image: linear-gradient(to right, rgba(10, 147, 150, 0.5), rgba(238, 155, 0, 0.5));"></span>
                            <span class="text-base md:text-lg">Engagement Metrics</span><br>
                            <span class="text-sm font-normal text-slate-600">(CTR, Session Time)</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">Evaluating AI Feature Performance</h3>
                    <p class="text-center text-slate-500 mb-4">Comparing different AI models or prompts requires a multi-faceted evaluation across technical, quality, and user experience dimensions.</p>
                    <div class="chart-container">
                        <canvas id="aiPerformanceRadar"></canvas>
                    </div>
                </div>

                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">Implementing AI Guardrails</h3>
                    <p class="text-center text-slate-500 max-w-3xl mx-auto mb-6">Robust guardrails are non-negotiable for responsible AI deployment. They involve integrating business logic and deploying continuous monitoring to prevent model degradation, detect bias, and safeguard the user experience.</p>
                    <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                        <div class="text-center p-4 rounded-lg bg-[#e9d8a6]/20">
                            <div class="text-3xl">‚öñÔ∏è</div>
                            <div class="font-bold text-[#ca6702] mt-2">Bias & Fairness Monitoring</div>
                        </div>
                        <div class="text-4xl text-slate-300 hidden md:block">‚Üí</div>
                        <div class="text-center p-6 rounded-full bg-[#005f73] text-white shadow-xl">
                            <div class="text-4xl">ü§ñ</div>
                            <div class="font-bold mt-2">AI Model</div>
                        </div>
                        <div class="text-4xl text-slate-300 hidden md:block">‚Üê</div>
                        <div class="text-center p-4 rounded-lg bg-[#94d2bd]/20">
                            <div class="text-3xl">üìâ</div>
                            <div class="font-bold text-[#0a9396] mt-2">Model Drift Detection</div>
                        </div>
                    </div>
                </div>

                <!-- New: AI Metric Suggestor -->
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">‚ú® AI Metric Suggester ‚ú®</h3>
                    <p class="text-center text-slate-500 max-w-2xl mx-auto mb-6">Describe your AI-powered feature (e.g., "a personalized news feed," "a chatbot for customer support"), and get suggested metrics for A/B testing its performance.</p>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-4">
                        <input type="text" id="aiFeatureInput" placeholder="e.g., a smart spam filter" class="flex-grow p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ee9b00]">
                        <button id="suggestAIMetricsBtn" class="bg-[#ee9b00] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#ca6702] transition duration-300 shadow-md">Suggest AI Metrics</button>
                    </div>
                    <div id="aiMetricsOutput" class="mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200 text-slate-700 min-h-[50px] flex items-center justify-center text-center">
                        <span class="text-slate-400">Suggested AI/ML metrics will appear here...</span>
                    </div>
                    <div id="aiMetricsLoader" class="hidden text-center mt-4 text-slate-500">Loading...</div>
                </div>

            </div>
        </section>

        <!-- Section 5: Statistical Best Practices -->
        <section id="stats" class="mb-16">
            <h2 class="text-3xl md:text-4xl font-bold text-[#005f73] text-center mb-4">Statistical Best Practices</h2>
             <p class="text-center text-lg text-slate-600 max-w-3xl mx-auto mb-12">Adhering to statistical rigor is what separates reliable insights from random noise.</p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                 <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">The Danger of "Peeking"</h3>
                    <p class="text-center text-slate-500 mb-4">Stopping a test prematurely when a variant seems to be winning leads to false positives. Statistical significance stabilizes only after collecting enough data over a sufficient duration.</p>
                    <div class="chart-container">
                        <canvas id="peekingDangerChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-center mb-4">Key Concepts at a Glance</h3>
                    <p class="text-center text-slate-500 mb-4">Understanding these core ideas is essential for interpreting test results correctly.</p>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b">
                                <tr>
                                    <th class="p-4 font-bold text-[#005f73]">Concept</th>
                                    <th class="p-4 font-bold text-[#005f73]">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b">
                                    <td class="p-4 font-semibold">Sample Size</td>
                                    <td class="p-4 text-slate-600">The number of users needed to reliably detect an effect. Must be determined before the test starts.</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-4 font-semibold">Statistical Significance</td>
                                    <td class="p-4 text-slate-600">The probability that the observed result is not due to random chance (typically >95%).</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-semibold">Confidence Interval</td>
                                    <td class="p-4 text-slate-600">A range of values within which the true effect of the change is likely to fall. Non-overlapping intervals indicate a winner.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

    </main>
    
    <!-- Footer -->
    <footer class="bg-white mt-16 border-t">
        <div class="container mx-auto px-6 py-4 text-center text-slate-500">
            <p>&copy; 2025 Data-Driven Insights Inc. Infographic based on Deep Research Report. Created by Kumar Siddharth Nirmal.</p>
        </div>
    </footer>

    <script>
        // Tooltip configuration for Chart.js
        const tooltipConfig = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            } else {
                              return label;
                            }
                        }
                    }
                }
            }
        };

        // Function to wrap long labels for Chart.js
        const wrapLabel = (label) => {
            const maxLength = 16;
            if (label.length <= maxLength) return label;
            
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';

            words.forEach(word => {
                if ((currentLine + ' ' + word).trim().length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            });
            lines.push(currentLine.trim());
            return lines;
        };

        // Chart 1: Elements to Test (Donut)
        const elementsToTestCtx = document.getElementById('elementsToTestChart').getContext('2d');
        const elementsData = {
            labels: ['Call-to-Action (CTA)', 'Headlines & Copy', 'Images & Visuals', 'Page Layout & Nav', 'Forms'],
            datasets: [{
                label: 'Elements to Test',
                data: [35, 25, 20, 15, 5],
                backgroundColor: [
                    '#0a9396',
                    '#94d2bd',
                    '#e9d8a6',
                    '#ee9b00',
                    '#ca6702'
                ],
                borderColor: '#ffffff',
                borderWidth: 2
            }]
        };
        new Chart(elementsToTestCtx, {
            type: 'doughnut',
            data: elementsData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    ...tooltipConfig.plugins,
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        // Chart 2: CTA Effectiveness (Bar)
        const ctaEffectivenessCtx = document.getElementById('ctaEffectivenessChart').getContext('2d');
        const ctaData = {
            labels: ['"Get My Free Trial"', '"Shop New Arrivals"', '"Download the Guide"', '"Learn More"', '"Submit"'],
            datasets: [{
                label: 'Relative Conversion Uplift (%)',
                data: [25, 21, 18, 5, 2],
                backgroundColor: ['#0a9396', '#94d2bd', '#e9d8a6', '#bb3e03', '#ae2012'],
                borderColor: '#ffffff',
                borderWidth: 1
            }]
        };
        new Chart(ctaEffectivenessCtx, {
            type: 'bar',
            data: ctaData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Conversion Uplift vs. Generic Baseline'
                        }
                    }
                },
                plugins: {
                    ...tooltipConfig.plugins,
                    legend: {
                        display: false
                    }
                }
            }
        });

        // Chart 3: AI Performance (Radar)
        const aiPerformanceCtx = document.getElementById('aiPerformanceRadar').getContext('2d');
        const aiPerformanceData = {
            labels: ['Accuracy', 'Latency', 'User Satisfaction', 'Cost Efficiency', 'Feature Adoption', 'Robustness'],
            datasets: [{
                label: 'New Recommendation Model',
                data: [85, 70, 75, 60, 80, 78],
                fill: true,
                backgroundColor: 'rgba(10, 147, 150, 0.2)',
                borderColor: '#0a9396',
                pointBackgroundColor: '#0a9396',
            }, {
                label: 'Control (Current Model)',
                data: [78, 85, 65, 90, 70, 88],
                fill: true,
                backgroundColor: 'rgba(238, 155, 0, 0.2)',
                borderColor: '#ee9b00',
                pointBackgroundColor: '#ee9b00',
            }]
        };
        new Chart(aiPerformanceCtx, {
            type: 'radar',
            data: aiPerformanceData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                 plugins: {
                    ...tooltipConfig.plugins,
                    legend: {
                        position: 'bottom',
                    }
                },
                scales: {
                    r: {
                        angleLines: {
                            display: true
                        },
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                }
            }
        });

        // Chart 4: Peeking Danger (Line)
        const peekingDangerCtx = document.getElementById('peekingDangerChart').getContext('2d');
        const peekingData = {
            labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7', 'Day 8', 'Day 9', 'Day 10', 'Day 11', 'Day 12', 'Day 13', 'Day 14'],
            datasets: [{
                label: 'Variant B Uplift % (Unstable)',
                data: [15, -5, 25, 8, 18, -2, 12, 6, 9, 7, 8, 8.5, 8.2, 8.3],
                borderColor: '#ca6702',
                tension: 0.4,
                fill: false
            }, {
                label: 'Significance Threshold (95%)',
                data: [5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5],
                borderColor: '#94d2bd',
                borderDash: [5, 5],
                pointRadius: 0
            }]
        };
         new Chart(peekingDangerCtx, {
            type: 'line',
            data: peekingData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Observed Conversion Uplift (%)'
                        }
                    }
                },
                 plugins: {
                    ...tooltipConfig.plugins,
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        // Gemini API integration for Hypothesis Generator
        document.getElementById('generateHypothesisBtn').addEventListener('click', async () => {
            const input = document.getElementById('hypothesisInput').value;
            const outputDiv = document.getElementById('hypothesisOutput');
            const loader = document.getElementById('hypothesisLoader');

            if (!input.trim()) {
                outputDiv.innerHTML = '<span class="text-red-500">Please enter a product goal.</span>';
                return;
            }

            outputDiv.innerHTML = '';
            loader.classList.remove('hidden');

            try {
                const prompt = `Generate a clear and measurable A/B test hypothesis based on the following product goal: "${input}". The hypothesis should follow the structure: "If [we make this change], then [this outcome] will happen, because [this reason]."`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    outputDiv.textContent = text;
                } else {
                    outputDiv.innerHTML = '<span class="text-red-500">Failed to generate hypothesis. Please try again.</span>';
                }
            } catch (error) {
                console.error('Error generating hypothesis:', error);
                outputDiv.innerHTML = '<span class="text-red-500">An error occurred. Please try again.</span>';
            } finally {
                loader.classList.add('hidden');
            }
        });

        // Gemini API integration for AI Metric Suggestor
        document.getElementById('suggestAIMetricsBtn').addEventListener('click', async () => {
            const input = document.getElementById('aiFeatureInput').value;
            const outputDiv = document.getElementById('aiMetricsOutput');
            const loader = document.getElementById('aiMetricsLoader');

            if (!input.trim()) {
                outputDiv.innerHTML = '<span class="text-red-500">Please describe your AI feature.</span>';
                return;
            }

            outputDiv.innerHTML = '';
            loader.classList.remove('hidden');

            try {
                const prompt = `Given the AI-powered feature: "${input}", suggest key performance metrics suitable for A/B testing its effectiveness. Focus on metrics relevant to AI/ML systems, including user experience, model performance, and operational considerations. Provide them as a bulleted list.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    outputDiv.innerHTML = text.replace(/\n/g, '<br>'); // Render newlines as breaks
                } else {
                    outputDiv.innerHTML = '<span class="text-red-500">Failed to suggest metrics. Please try again.</span>';
                }
            } catch (error) {
                console.error('Error suggesting AI metrics:', error);
                outputDiv.innerHTML = '<span class="text-red-500">An error occurred. Please try again.</span>';
            } finally {
                loader.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
